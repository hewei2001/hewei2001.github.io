<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/logo.jpg"><link rel="icon" href="/img/logo.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#01213a"><meta name="author" content="Wei He"><meta name="keywords" content="Computer Science and Technology, Machine Learning, Deep Learning, Computer Vision, Natural Language Processing"><meta name="description" content="「信息检索」课程笔记，本文介绍网页排序的基本思想、PageRank 算法及其主题敏感改进、HITS 超链接追敏算法。"><meta property="og:type" content="article"><meta property="og:title" content="IR学习笔记 #09 网页排序"><meta property="og:url" content="https://hwcoder.top/IR-Note-9"><meta property="og:site_name" content="Hwcoder - Life Oriented Programming"><meta property="og:description" content="「信息检索」课程笔记，本文介绍网页排序的基本思想、PageRank 算法及其主题敏感改进、HITS 超链接追敏算法。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hwcoder.top/img/home/IR.jpg"><meta property="article:published_time" content="2021-08-25T09:59:09.000Z"><meta property="article:modified_time" content="2022-11-28T07:48:50.000Z"><meta property="article:author" content="Wei He"><meta property="article:tag" content="IR"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://hwcoder.top/img/home/IR.jpg"><title>IR学习笔记 #09 网页排序 | Hwcoder - Life Oriented Programming</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/mac.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"hwcoder.top",root:"/",version:"1.9.5",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h2, h3",placement:"left",visible:"always",icon:"§"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4",collapseDepth:3},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"XGNf4GEnaFLiUijMUvz8HSBF-gzGzoHsz",app_key:"JPeVLcug6EcWdBTpGrDJSdKi",server_url:"https://xgnf4gen.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!0}},search_path:"/local-search.xml",include_content_in_search:!0};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=",function(){function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","")})</script><meta name="generator" content="Hexo 5.4.2"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Hwcoder</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/bg/other.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="IR学习笔记 #09 网页排序"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-08-25 17:59" pubdate>2021年8月25日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 5.4k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 31 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="学习笔记" id="heading-078425eaf316a180b0989442e53f920b" role="tab" data-toggle="collapse" href="#collapse-078425eaf316a180b0989442e53f920b" aria-expanded="true">学习笔记 <span class="list-group-count">(45)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-078425eaf316a180b0989442e53f920b" role="tabpanel" aria-labelledby="heading-078425eaf316a180b0989442e53f920b"><div class="category-post-list"></div><div class="category-sub row nomargin-x"><a class="category-subitem list-group-item category-item-action col-10 col-md-11 col-xm-11" title="信息检索" id="heading-b10f39c13b5f9af517dfde91c4da0ec4" role="tab" data-toggle="collapse" href="#collapse-b10f39c13b5f9af517dfde91c4da0ec4" aria-expanded="true">信息检索 <span class="list-group-count">(11)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-b10f39c13b5f9af517dfde91c4da0ec4" role="tabpanel" aria-labelledby="heading-b10f39c13b5f9af517dfde91c4da0ec4"><div class="category-post-list"><a href="/IR-Note-1" title="IR学习笔记 #01 概论&amp;布尔模型" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #01 概论&amp;布尔模型</span> </a><a href="/IR-Note-2" title="IR学习笔记 #02 统计语言模型" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #02 统计语言模型</span> </a><a href="/IR-Note-3" title="IR学习笔记 #03 向量空间模型" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #03 向量空间模型</span> </a><a href="/IR-Note-4" title="IR学习笔记 #04 概率模型" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #04 概率模型</span> </a><a href="/IR-Note-5" title="IR学习笔记 #05 检索系统评价" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #05 检索系统评价</span> </a><a href="/IR-Note-6" title="IR学习笔记 #06 网络信息检索" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #06 网络信息检索</span> </a><a href="/IR-Note-7" title="IR学习笔记 #07 IRLbot" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #07 IRLbot</span> </a><a href="/IR-Note-8" title="IR学习笔记 #08 倒排索引模型" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #08 倒排索引模型</span> </a><a href="/IR-Note-9" title="IR学习笔记 #09 网页排序" class="list-group-item list-group-item-action active"><span class="category-post">IR学习笔记 #09 网页排序</span> </a><a href="/IR-Note-10" title="IR学习笔记 #10 查询相关反馈" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #10 查询相关反馈</span> </a><a href="/IR-Note-11" title="IR学习笔记 #11 问答系统" class="list-group-item list-group-item-action"><span class="category-post">IR学习笔记 #11 问答系统</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="强化学习" id="heading-6964a39570837d485ed73b611a392391" role="tab" data-toggle="collapse" href="#collapse-6964a39570837d485ed73b611a392391" aria-expanded="false">强化学习 <span class="list-group-count">(12)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-6964a39570837d485ed73b611a392391" role="tabpanel" aria-labelledby="heading-6964a39570837d485ed73b611a392391"><div class="category-post-list"><a href="/RL-Note-1" title="RL 学习笔记 #01 基本概念" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #01 基本概念</span> </a><a href="/RL-Note-2" title="RL 学习笔记 #02 贝尔曼公式" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #02 贝尔曼公式</span> </a><a href="/RL-Note-3" title="RL 学习笔记 #03 值迭代和策略迭代" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #03 值迭代和策略迭代</span> </a><a href="/RL-Note-4" title="RL 学习笔记 #04 蒙特卡洛学习算法" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #04 蒙特卡洛学习算法</span> </a><a href="/RL-Note-5" title="RL 学习笔记 #05 随机近似与随机梯度下降" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #05 随机近似与随机梯度下降</span> </a><a href="/RL-Note-6" title="RL 学习笔记 #06 时序差分学习算法" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #06 时序差分学习算法</span> </a><a href="/RL-Note-7" title="RL 学习笔记 #07 值函数近似和 DQN 算法" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #07 值函数近似和 DQN 算法</span> </a><a href="/RL-Note-8" title="RL 学习笔记 #08 策略梯度方法" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #08 策略梯度方法</span> </a><a href="/RL-Note-9" title="RL 学习笔记 #09 Actor-Critic 方法" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #09 Actor-Critic 方法</span> </a><a href="/RL-Note-10" title="RL 学习笔记 #10 近端策略优化（PPO）理论" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #10 近端策略优化（PPO）理论</span> </a><a href="/RL-Note-11" title="RL 学习笔记 #11 PPO 在 RLHF 中的应用" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #11 PPO 在 RLHF 中的应用</span> </a><a href="/RL-Note-12" title="RL 学习笔记 #12 OpenRLHF-PPO 实践" class="list-group-item list-group-item-action"><span class="category-post">RL 学习笔记 #12 OpenRLHF-PPO 实践</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="本科课程" id="heading-d577b913fa605a2342ab24bd1b0bea8b" role="tab" data-toggle="collapse" href="#collapse-d577b913fa605a2342ab24bd1b0bea8b" aria-expanded="false">本科课程 <span class="list-group-count">(4)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-d577b913fa605a2342ab24bd1b0bea8b" role="tabpanel" aria-labelledby="heading-d577b913fa605a2342ab24bd1b0bea8b"><div class="category-post-list"><a href="/Database-System" title="数据库系统 应试笔记" class="list-group-item list-group-item-action"><span class="category-post">数据库系统 应试笔记</span> </a><a href="/Mathematical-Logic" title="数理逻辑 应试笔记" class="list-group-item list-group-item-action"><span class="category-post">数理逻辑 应试笔记</span> </a><a href="/Software-Engineering-1" title="软件工程 应试笔记 #1" class="list-group-item list-group-item-action"><span class="category-post">软件工程 应试笔记 #1</span> </a><a href="/Software-Engineering-2" title="软件工程 应试笔记 #2" class="list-group-item list-group-item-action"><span class="category-post">软件工程 应试笔记 #2</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="机器学习" id="heading-61bb1751fd355596e307767d1927c855" role="tab" data-toggle="collapse" href="#collapse-61bb1751fd355596e307767d1927c855" aria-expanded="false">机器学习 <span class="list-group-count">(13)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-61bb1751fd355596e307767d1927c855" role="tabpanel" aria-labelledby="heading-61bb1751fd355596e307767d1927c855"><div class="category-post-list"><a href="/ML-Note-1" title="ML学习笔记 #01 梯度下降：一元线性回归" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #01 梯度下降：一元线性回归</span> </a><a href="/ML-Note-2" title="ML学习笔记 #02 梯度下降：多元线性回归" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #02 梯度下降：多元线性回归</span> </a><a href="/ML-Note-3" title="ML学习笔记 #03 正规方程：多元线性回归" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #03 正规方程：多元线性回归</span> </a><a href="/ML-Note-4" title="ML学习笔记 #04 逻辑回归：二分类到多分类" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #04 逻辑回归：二分类到多分类</span> </a><a href="/ML-Note-5" title="ML学习笔记 #05 过拟合与正则化" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #05 过拟合与正则化</span> </a><a href="/ML-Note-6" title="ML学习笔记 #06 神经网络基础" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #06 神经网络基础</span> </a><a href="/ML-Note-7" title="ML学习笔记 #07 神经网络：反向传播" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #07 神经网络：反向传播</span> </a><a href="/ML-Note-8" title="ML学习笔记 #08 数据集划分与误差分析" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #08 数据集划分与误差分析</span> </a><a href="/ML-Note-9" title="ML学习笔记 #09 支持向量机" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #09 支持向量机</span> </a><a href="/ML-Note-10" title="ML学习笔记 #10 K-Means 聚类" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #10 K-Means 聚类</span> </a><a href="/ML-Note-11" title="ML学习笔记 #11 主成分分析" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #11 主成分分析</span> </a><a href="/ML-Note-12" title="ML学习笔记 #12 异常检测" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #12 异常检测</span> </a><a href="/ML-Note-13" title="ML学习笔记 #13 协同过滤推荐算法" class="list-group-item list-group-item-action"><span class="category-post">ML学习笔记 #13 协同过滤推荐算法</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="模式识别" id="heading-03b289aaa6b21d8730ca1e736a2796eb" role="tab" data-toggle="collapse" href="#collapse-03b289aaa6b21d8730ca1e736a2796eb" aria-expanded="false">模式识别 <span class="list-group-count">(5)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-03b289aaa6b21d8730ca1e736a2796eb" role="tabpanel" aria-labelledby="heading-03b289aaa6b21d8730ca1e736a2796eb"><div class="category-post-list"><a href="/PR-Note-1" title="PR学习笔记 #1 KNN 分类器" class="list-group-item list-group-item-action"><span class="category-post">PR学习笔记 #1 KNN 分类器</span> </a><a href="/PR-Note-2" title="PR学习笔记 #2 贝叶斯分类器" class="list-group-item list-group-item-action"><span class="category-post">PR学习笔记 #2 贝叶斯分类器</span> </a><a href="/PR-Note-3" title="PR学习笔记 #3 概率密度：参数估计" class="list-group-item list-group-item-action"><span class="category-post">PR学习笔记 #3 概率密度：参数估计</span> </a><a href="/PR-Note-4" title="PR学习笔记 #4 概率密度：非参数估计" class="list-group-item list-group-item-action"><span class="category-post">PR学习笔记 #4 概率密度：非参数估计</span> </a><a href="/PR-Note-5" title="PR学习笔记 #5 判别式 vs. 生成式" class="list-group-item list-group-item-action"><span class="category-post">PR学习笔记 #5 判别式 vs. 生成式</span></a></div></div></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">IR学习笔记 #09 网页排序</h1><p class="note note-info">本文最后更新于：2022年11月28日 下午</p><div class="markdown-body"><p>当我们在一个小的文档库中查询时，即使 query 很模糊，我们只要返回所有相关文档即可，甚至不需要<strong>猜测</strong>用户的查询需求。</p><p>但如果在一个大的文档集中查询时（比如谷歌），往往可以返回大量的相关文档。如果基于相关度的 ranking，往往无法区分哪些文档该呈现在最前面，甚至可能时一些低质量的网页由于某些词的词频很高，从而排在了前面。</p><p>此时我们就不能只聚焦于「相关度」，PageRank 算法通过计算一个页面的「<strong>重要度</strong>」，从而判别网页质量，得到排序。</p><h2 id="基本思想">基本思想</h2><p>如何衡量「重要度」？用点击率、权威性？然而，这些数据都是爬虫无法爬取到的，同时也难以正确衡量。</p><p>科学家们从 Bibliometrics (文献计量学) 中借鉴了如下观点：</p><ul><li>Bibliographic coupling (引文耦合)：两篇文章具有相近的引用。</li><li>Co-citation (协同引用)：两篇文章被大量其他文章同时引用。</li><li>Impact factor (影响因子)：一个期刊中的文章的年平均被引次数，衡量了一个期刊的「<strong>重要度</strong>」。</li></ul><p>例如，最权威的 SCI 往往只收录其认为重要的期刊，也只记录其中的期刊相互引用的次数。当一篇文章被 SCI 收录的文章引用时，通常也可以说明其有一定的影响力——即重要度的「<strong>传递</strong>」。</p><p>对于文献引用的可视化，我们通常称为 Citation Graph，通常是一个 Directed Acyclic Graph (有向无环图，DAG)，因为较早的文章无法修改而引用后来的文章。</p><p>在网页中，我们可以 Hyperlinks (超链接) 来类比引用，从而形成一个 Hyperlink Graph，区别是这类图中可以有环路。</p><p>从而引出网页排序的基本假设：</p><ul><li>The rank of a web page is higher if many pages link to it.</li><li>Links from highly ranked pages are given greater weight than links from less highly ranked pages.</li></ul><h2 id="pagerank-algorithm">PageRank Algorithm</h2><p>基于上述假设，我们很容易可以得到当前页面的链入、链出数。但是，要怎么知道链入当前页面的<strong>前序页面</strong>，其重要度是多少呢？</p><h3 id="随机游走模型-random-walk-model">随机游走模型 | Random Walk Model</h3><p>在一个封闭的 Hyperlink Graph 中，随机选取一个页面作为访问起点，随机选取其链出的页面进行访问，再对下一个页面重复上述操作。</p><p>大量重复后，统计每个结点被访问的频率，用频率近似概率后，我们可以发现访问概率较大者通常有着较多的链入，或者其链入页面也有着较大的访问概率。用公式表示就是： <span class="math display">\[ \mathrm{Pr}\left( P_i \right) =\mathrm{Pr}\left( P_i\mid P_1 \right) \mathrm{Pr}\left( P_1 \right) +\mathrm{Pr}\left( P_i\mid P_2 \right) \mathrm{Pr}\left( P_2 \right) +\cdots +\mathrm{Pr}\left( P_i\mid P_N \right) \mathrm{Pr}\left( P_N \right) \]</span> 其中 $( P_iP_1 ) $​​ 表示从编号为 1 的网页跳转到编号为 <em>i</em> 的网页的概率，其计算方式为： <span class="math display">\[ \mathrm{Pr}\left( P_i\mid P_1 \right) =\begin{cases} 0\text{，如果}P_1\text{到}P_i\text{没有链入}\\ \frac{1}{m}\text{，}m\text{为}P_1\text{的链出数}\\ \end{cases} \]</span></p><h3 id="矩阵表示-matrix-representation">矩阵表示 | Matrix Representation</h3><p>令 $w_i=( P_i ) $，则 <span class="math inline">\(\boldsymbol{w}=\left[ \mathrm{Pr}\left( P_1 \right) ,\mathrm{Pr}\left( P_2 \right) ,\cdots ,\mathrm{Pr}\left( P_N \right) \right] ^T\)</span>，再令 $_i=$，则有：</p><p><span class="math display">\[ w_{i}=B_i\cdot \boldsymbol{w} \]</span></p><p>特别地，当 <em>i</em> 取遍 1 到 N 的所有值后， 得到矩阵形式： <span class="math display">\[ \boldsymbol{w}=B\cdot \boldsymbol{w} \]</span> 其中 <em>B</em> 称作<strong>标准化链接矩阵</strong>，矩阵中的每个元素代表列号对应的 Page 链入行号对应的 Page 的概率，每列之和为 1。当一个页面没有链出时，这一列全为 0。</p><p>于是我们可以用<strong>迭代</strong>方法求解这个方程的稳定解 <span class="math inline">\(\boldsymbol{w}_k\)</span>​​​——即我们想求的访问概率向量，也就是<strong>重要度</strong>向量。只需要将 <span class="math inline">\(\boldsymbol{w}_0\)</span>​​​ 设为全 1 向量（因为一开始随机访问到每个页面的概率都相同），不断代入即可。</p><h3 id="阻尼迭代-pagerank-with-damping">阻尼迭代 | PageRank with Damping</h3><p>然而，现在存在的问题是，上面的所有推导都是建立在理想状态下的，即假设所有网页组成的这个有向图是<strong>强连通</strong>的。</p><p>当 Hyperlink Graph 存在 link loops (<strong>循环陷阱</strong>)，即存在一个小的子图，只有链入没有链出，所有随机游走的用户到了这几个网页后，就如同进了黑洞一般，一直在里面“打转”，出不来了。</p><p>这样就使得当游走次数趋于无穷时，最终陷阱中结点的访问次数远大于其他结点。这样会使得计算出的 <span class="math inline">\(\boldsymbol{w}\)</span> 向量中，陷阱外的结点访问概率都为 0。</p><p>PageRank 算法最终采用了<strong>阻尼因子</strong>（damping factor）的修正，使得进入陷阱后仍有机会跳出循环。 <span class="math display">\[ \boldsymbol{w}_k=d\boldsymbol{w}_0+\left( 1-d \right) B\cdot \boldsymbol{w}_{k-1} \]</span> 其中 <span class="math inline">\(\boldsymbol{w}_0\)</span>​ 为全 1 向量，<em>d</em> 是实验确定的常数，通常取 0.15。</p><h3 id="结合相关度-combined-method">结合相关度 | Combined Method</h3><p>有了重要度向量后，当有查询时，我们只需要先确定<strong>命中文档</strong>（至少有一个 term 与 query 相同的文档），再将其用重要度排序即可。</p><p>然而，这样做的缺点是，没有考虑到查询和文档的相关性——即，有可能一篇文档虽然有相同的 term，但主题却相去甚远。</p><p>于是，有人提出了结合 Term Weighting 和 PageRank 的方法，在确定命中文档后，利用传统的权重计算方法，计算出 query 和每个 doc 的相似度 <span class="math inline">\(s_j\)</span>。再和重要度 <span class="math inline">\(p_j\)</span>​ 线性加权算出排序指标： <span class="math display">\[ c_j=\lambda s_j+\left( 1-\lambda \right) p_j \]</span> 其中 <span class="math inline">\(\lambda\)</span>​ 为实验确定的常数。</p><h3 id="pagerank-算法缺点">PageRank 算法缺点</h3><ol type="1"><li><p>忽略了查询，则忽略了 query 和 doc 主题相关性，导致结果的相关性降低。</p></li><li><p>没有过滤广告链接和功能链接（例如常见的分享链接）。这些链接通常没有什么实际价值，前者链接到广告页面，后者常常链接到某个社交网站首页。</p></li><li><p>对新网页不友好。因为即使是非常好的新页面也不会有很多链入，要成为一个高重要度的页面仍需要很长时间的推广。</p></li></ol><h2 id="主题敏感-pr-topic-sensitive-pagerank">主题敏感 PR | Topic-Sensitive PageRank</h2><p>在实际的网络中，PageRank 算法还存在「<strong>主题漂移</strong>」问题，特别对于大量随意交互外链的站点，会导致搜索引擎返回主题无关结果。</p><p>同时，前面的讨论提到，PageRank 忽略了 query 的主题相关性，也导致了结果的相关性降低。同一查询词在<strong>不同语境</strong>下，语义上指向的可能是不同的主题，但 PageRank 无论如何都是返回「重要度」最高的页面。</p><p>理想情况下，应为每个用户的偏好维护一套专用的「主题重要度」向量，但面对海量用户这种方法显然不可行。所以搜索引擎一般会选择一种称为主题敏感的折中方案。</p><h3 id="基本思想-basic-idea">基本思想 | Basic Idea</h3><p><strong>基本假设</strong>：在 PageRank 的随机游走模型中，用户倾向于选择具有<strong>同一个主题</strong>的链出网页。</p><p>基于这个假设，可以预定义几个话题类别，例如体育、娱乐、科技等等，对于某个网页来说，对应某个主题类型都有相应的 PageRank 分值，然后想办法关联用户的话题倾向，根据用户的话题倾向排序结果。</p><h3 id="矩阵形式-matrix-form">矩阵形式 | Matrix Form</h3><p>与原始的 PageRank 不同，新的算法对出度为 0 的网站加以处理以保证<strong>收敛性</strong>。引入了向量 <span class="math inline">\(\boldsymbol{d}\)</span>​​​ 来指示某一个网页是否出度为 0，若为 0 则对应项为 1。 <span class="math display">\[ d_{i}= \begin{cases}1 &amp; \text { if } \operatorname{deg}(j)=0 \\ 0 &amp; \text { otherwise }\end{cases} \]</span></p><p>向量 <span class="math inline">\(\boldsymbol{p}\)</span> 来表示访问各个网页的概率均等，代替 <span class="math inline">\(\boldsymbol{w}_0\)</span>​ 的写法：</p><p><span class="math display">\[ \boldsymbol{p}=\left[\frac{1}{n}\right]_{n \times 1} \]</span></p><p>两个矩阵的乘积所得的矩阵 <em>D</em> 表示出度为 0 的网页将以均等概率访问其他网页。与前述提到的矩阵 <span class="math inline">\(B\)</span>​​ 具有互补的特性，补充了在随机游走模型中，一个网页出度为 0 时的访问页面的情况。这样做使得最终矩阵的每一列之和都为 1。 <span class="math display">\[ D=\boldsymbol{p} \times \boldsymbol{d}^{T} \]</span> 则最终排名的计算方法为： <span class="math display">\[ \boldsymbol{Rank} =d \boldsymbol{p} + (1-d)(B+D) \cdot \boldsymbol{Rank} \]</span></p><h3 id="偏置向量-odp-biasing">偏置向量 | ODP-Biasing</h3><p>主题的预定义参考了 <a href="www.dmoz.org">ODP</a> (Open Directory Project) 网站，利用 ODP 中 16 个顶级分类下的 URLs 生成了 16 组偏置 PageRank 向量 (biased PageRank vectors)。</p><p>为了实现这一点，算法中采用了新的向量 <span class="math inline">\(\boldsymbol{v_j}=\boldsymbol{p}\)</span>，针对每个主题有： <span class="math display">\[ v_{j i}=\left\{\begin{array}{cl} \frac{1}{\left|T_{j}\right|} &amp; i \in T_{j} \\ 0 &amp; i \notin T_{j} \end{array}\right. \]</span> 其中 <span class="math inline">\(T_{j}\)</span>​ 表示在契合第 <em>j</em> 个主题的网页集合。包含在这些网页中的页面被赋予较大的跳转概率值，而其他网站则相对减少。</p><h3 id="查询打分-query-time-importance-score">查询打分 | Query-Time Importance Score</h3><p>此外，还需要在给定一个查询 <em>q</em> 的时候，估算出该查询落在某个主题 <span class="math inline">\(c_j\)</span> 的概率。文章使用了<strong>朴素贝叶斯分类器</strong>（naive-Bayes classifier），将查询 <em>q</em> 中的每个 term 分词记作 <span class="math inline">\(q_i\)</span>，利用贝叶斯公式： <span class="math display">\[ P\left(c_{j} \mid q\right)=\frac{p\left(c_{j}\right) \cdot P\left(q \mid c_{j}\right)}{P\left(q\right)} \propto P\left(c_{j}\right) \cdot \prod_{i} P\left(q_{i} \mid c_{j}\right) \]</span> 而 <span class="math inline">\(P\left(q_{i} \mid c_{j}\right)\)</span> 则容易用统计的方法估计出来，对于 <span class="math inline">\(P\left(c_{j}\right)\)</span>​ 则采用<strong>先验概率</strong>的方法，根据用户的查询历史（上下文）进行动态调整。</p><p>计算出了查询落在各个主题的概率后，再用这个概率对各个主题下的 <strong><em>Rank</em></strong> 向量进行线性加权，即可得到最终排序用的评分： <span class="math display">\[ s_{q d}=\sum_{j} P\left(c_{j} \mid q^{\prime}\right) \cdot r_{j d} \]</span></p><h2 id="hits-hyperlink-induced-topic-search">HITS: Hyperlink-Induced Topic Search</h2><p>这里再介绍一种基础的网页排序算法——基于超链接追敏的主题排序，对于一个查询，不再返回单一的网页排名，而是同时返回两个列表：</p><ul><li>包含链接的 Hub 网页，收录了主题相关的权威网页链接。</li><li>包含内容的 Authority 网页，有着与主题相关的高质量内容。</li></ul><p>那么，如何排序这两个列表呢？</p><p><strong>基本假设</strong>：</p><ul><li>一个好的 Hub 网页指向该主题的许多 Authority 网页。</li><li>一个好的 Authority 网页被许多好的 Hub 网页指向。</li></ul><p>基于这两个假设，我们可以提出两个指标来衡量每个页面：枢纽值（Hub Scores）和权威值（Authority Scores），这两种值是互相依存、互相影响的。</p><ul><li>枢纽值，指的是页面上所有出链指向页面的权威值之和。</li><li>权威值，指的是页面的所有入链所在的原页面的枢纽值之和。</li></ul><h3 id="算法步骤-hits-algorithm">算法步骤 | HITS Algorithm</h3><ol type="1"><li><p>找出 root set：根据用户 query 中的 term，在文档集中找出包含至少一个 term 的的文档，使他们构成 root set。</p></li><li><p>找出 <strong>base set</strong>：在 root set 的基础上，找出集合中网页链入或链出并且不在 root set 中的网页，并把他们加入到集合中，从而构成 base set。</p></li><li><p>计算每一个网页的枢纽值 h(x) 和权威值 a(x)，初始时，所有 h 值和 a 值均为 1。</p></li><li><p><strong>迭代</strong>更新两个值直至收敛。为了防止两个值太大，可以在每次迭代后归一化。归一化的指标不重要，因为我们只关注相对排名。</p></li><li><p>返回两个值分别排序的列表。</p></li></ol><h3 id="hits-算法缺点">HITS 算法缺点</h3><ol type="1"><li>尽管限制了计算对象在 base set 中，但在线计算效率还是太低，不如 PR 快。</li><li>主题漂移现象仍未解决。如果在集合里包含与查询主题无关的页面，且含有大量相互链接，可能会排到前列。这种现象被称为<strong>紧密链接社区</strong>现象。</li></ol></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="category-chain-item">学习笔记</a> <span>></span> <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%A3%80%E7%B4%A2/" class="category-chain-item">信息检索</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/IR/" class="print-no-link">#IR</a></div></div><div class="license-box my-3"><div class="license-title"><div>IR学习笔记 #09 网页排序</div><div>https://hwcoder.top/IR-Note-9</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Wei He</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2021年8月25日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/IR-Note-10" title="IR学习笔记 #10 查询相关反馈"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">IR学习笔记 #10 查询相关反馈</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/IR-Note-8" title="IR学习笔记 #08 倒排索引模型"><span class="hidden-mobile">IR学习笔记 #08 倒排索引模型</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"jdbBr3BddTiqSCPnXw6sXFv7-gzGzoHsz","appKey":"2bjgwDr2opjVCwhgjDMpk53c","path":"window.location.pathname","placeholder":"说点什么吧( •̀ ω •́ )✧","avatar":"retro","meta":["nick","mail","link"],"requiredFields":["nick"],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,i=t.getElementById("subtitle");i&&e&&e(i.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script>if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });</script><script src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-svg-full.js"></script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>