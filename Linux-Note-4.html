<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/logo.jpg"><link rel="icon" href="/img/logo.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#01213a"><meta name="author" content="Wei He"><meta name="keywords" content="Computer Science and Technology, Machine Learning, Deep Learning, Computer Vision, Natural Language Processing"><meta name="description" content="学习 Linux 时做的笔记，本文记录了初次连接服务器后，配置 Anaconda 深度学习环境的过程，以及 Git、Zsh、反向代理等个人配置，文末附上一键配置环境脚本。"><meta property="og:type" content="article"><meta property="og:title" content="Linux学习笔记 #4 服务器环境配置"><meta property="og:url" content="https://hwcoder.top/Linux-Note-4"><meta property="og:site_name" content="Hwcoder - Life Oriented Programming"><meta property="og:description" content="学习 Linux 时做的笔记，本文记录了初次连接服务器后，配置 Anaconda 深度学习环境的过程，以及 Git、Zsh、反向代理等个人配置，文末附上一键配置环境脚本。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hwcoder.top/img/home/Linux.png"><meta property="article:published_time" content="2022-03-04T16:31:57.000Z"><meta property="article:modified_time" content="2024-08-12T07:16:45.616Z"><meta property="article:author" content="Wei He"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://hwcoder.top/img/home/Linux.png"><title>Linux学习笔记 #4 服务器环境配置 | Hwcoder - Life Oriented Programming</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/mac.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"hwcoder.top",root:"/",version:"1.9.5",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h2, h3",placement:"left",visible:"always",icon:"§"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4",collapseDepth:3},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"XGNf4GEnaFLiUijMUvz8HSBF-gzGzoHsz",app_key:"JPeVLcug6EcWdBTpGrDJSdKi",server_url:"https://xgnf4gen.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!0}},search_path:"/local-search.xml",include_content_in_search:!0};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=",function(){function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","")})</script><meta name="generator" content="Hexo 5.4.2"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Hwcoder</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/bg/other.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Linux学习笔记 #4 服务器环境配置"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-03-05 00:31" pubdate>2022年3月5日 凌晨</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 9.7k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 54 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="技术经验" id="heading-8ee11c06b6f625f35ca6ebfa64545bc3" role="tab" data-toggle="collapse" href="#collapse-8ee11c06b6f625f35ca6ebfa64545bc3" aria-expanded="true">技术经验 <span class="list-group-count">(20)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-8ee11c06b6f625f35ca6ebfa64545bc3" role="tabpanel" aria-labelledby="heading-8ee11c06b6f625f35ca6ebfa64545bc3"><div class="category-post-list"></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Docker" id="heading-c5fd214cdd0d2b3b4272e73b022ba5c2" role="tab" data-toggle="collapse" href="#collapse-c5fd214cdd0d2b3b4272e73b022ba5c2" aria-expanded="false">Docker <span class="list-group-count">(2)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-c5fd214cdd0d2b3b4272e73b022ba5c2" role="tabpanel" aria-labelledby="heading-c5fd214cdd0d2b3b4272e73b022ba5c2"><div class="category-post-list"><a href="/Docker-Note-1" title="Docker学习笔记 #1 基本概念与原理" class="list-group-item list-group-item-action"><span class="category-post">Docker学习笔记 #1 基本概念与原理</span> </a><a href="/Docker-Note-2" title="Docker学习笔记 #2 常用命令" class="list-group-item list-group-item-action"><span class="category-post">Docker学习笔记 #2 常用命令</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Git" id="heading-0bcc70105ad279503e31fe7b3f47b665" role="tab" data-toggle="collapse" href="#collapse-0bcc70105ad279503e31fe7b3f47b665" aria-expanded="false">Git <span class="list-group-count">(4)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-0bcc70105ad279503e31fe7b3f47b665" role="tabpanel" aria-labelledby="heading-0bcc70105ad279503e31fe7b3f47b665"><div class="category-post-list"><a href="/Git-Note-1" title="Git学习笔记 #1 基础知识介绍" class="list-group-item list-group-item-action"><span class="category-post">Git学习笔记 #1 基础知识介绍</span> </a><a href="/Git-Note-2" title="Git学习笔记 #2 本地仓库使用" class="list-group-item list-group-item-action"><span class="category-post">Git学习笔记 #2 本地仓库使用</span> </a><a href="/Git-Note-3" title="Git学习笔记 #3 远程仓库使用" class="list-group-item list-group-item-action"><span class="category-post">Git学习笔记 #3 远程仓库使用</span> </a><a href="/Git-Note-4" title="Git学习笔记 #4 GitHub合作开发" class="list-group-item list-group-item-action"><span class="category-post">Git学习笔记 #4 GitHub合作开发</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Linux" id="heading-edc9f0a5a5d57797bf68e37364743831" role="tab" data-toggle="collapse" href="#collapse-edc9f0a5a5d57797bf68e37364743831" aria-expanded="true">Linux <span class="list-group-count">(4)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-edc9f0a5a5d57797bf68e37364743831" role="tabpanel" aria-labelledby="heading-edc9f0a5a5d57797bf68e37364743831"><div class="category-post-list"><a href="/Linux-Note-1" title="Linux学习笔记 #1 终端与Shell" class="list-group-item list-group-item-action"><span class="category-post">Linux学习笔记 #1 终端与Shell</span> </a><a href="/Linux-Note-2" title="Linux学习笔记 #2 高级的Shell与文件管理" class="list-group-item list-group-item-action"><span class="category-post">Linux学习笔记 #2 高级的Shell与文件管理</span> </a><a href="/Linux-Note-3" title="Linux学习笔记 #3 使用远程服务器" class="list-group-item list-group-item-action"><span class="category-post">Linux学习笔记 #3 使用远程服务器</span> </a><a href="/Linux-Note-4" title="Linux学习笔记 #4 服务器环境配置" class="list-group-item list-group-item-action active"><span class="category-post">Linux学习笔记 #4 服务器环境配置</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="PyTorch" id="heading-95b88f180e9eb5678e0f9ebac2cbe643" role="tab" data-toggle="collapse" href="#collapse-95b88f180e9eb5678e0f9ebac2cbe643" aria-expanded="false">PyTorch <span class="list-group-count">(2)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-95b88f180e9eb5678e0f9ebac2cbe643" role="tabpanel" aria-labelledby="heading-95b88f180e9eb5678e0f9ebac2cbe643"><div class="category-post-list"><a href="/PyTorch-Note-1" title="PyTorch笔记 #1 基础操作" class="list-group-item list-group-item-action"><span class="category-post">PyTorch笔记 #1 基础操作</span> </a><a href="/PyTorch-Note-2" title="PyTorch笔记 #2 神经网络" class="list-group-item list-group-item-action"><span class="category-post">PyTorch笔记 #2 神经网络</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Python" id="heading-a7f5f35426b927411fc9231b56382173" role="tab" data-toggle="collapse" href="#collapse-a7f5f35426b927411fc9231b56382173" aria-expanded="false">Python <span class="list-group-count">(4)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-a7f5f35426b927411fc9231b56382173" role="tabpanel" aria-labelledby="heading-a7f5f35426b927411fc9231b56382173"><div class="category-post-list"><a href="/Python-Note-1" title="Python笔记 #1 基础语法" class="list-group-item list-group-item-action"><span class="category-post">Python笔记 #1 基础语法</span> </a><a href="/Python-Note-2" title="Python笔记 #2 NumPy" class="list-group-item list-group-item-action"><span class="category-post">Python笔记 #2 NumPy</span> </a><a href="/Python-Note-3" title="Python笔记 #3 Matplotlib" class="list-group-item list-group-item-action"><span class="category-post">Python笔记 #3 Matplotlib</span> </a><a href="/Python-Note-4" title="Python笔记 #4 常用标准库和第三方库" class="list-group-item list-group-item-action"><span class="category-post">Python笔记 #4 常用标准库和第三方库</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Vim" id="heading-944037673fd019101da363c74a0feed9" role="tab" data-toggle="collapse" href="#collapse-944037673fd019101da363c74a0feed9" aria-expanded="false">Vim <span class="list-group-count">(1)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-944037673fd019101da363c74a0feed9" role="tabpanel" aria-labelledby="heading-944037673fd019101da363c74a0feed9"><div class="category-post-list"><a href="/Vim-Note-1" title="Vim学习笔记 #1 基础操作与配置" class="list-group-item list-group-item-action"><span class="category-post">Vim学习笔记 #1 基础操作与配置</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Zotero" id="heading-eb74b00f2c3d9a56f1e9e6f47c462f15" role="tab" data-toggle="collapse" href="#collapse-eb74b00f2c3d9a56f1e9e6f47c462f15" aria-expanded="false">Zotero <span class="list-group-count">(1)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-eb74b00f2c3d9a56f1e9e6f47c462f15" role="tabpanel" aria-labelledby="heading-eb74b00f2c3d9a56f1e9e6f47c462f15"><div class="category-post-list"><a href="/Zotero-Note-1" title="Zotero使用技巧：坚果云同步、常用插件" class="list-group-item list-group-item-action"><span class="category-post">Zotero使用技巧：坚果云同步、常用插件</span></a></div></div></div><div class="category-sub row nomargin-x"><a class="category-subitem collapsed list-group-item category-item-action col-10 col-md-11 col-xm-11" title="博客" id="heading-c50d13646ec66f1929da5d491f2dff0f" role="tab" data-toggle="collapse" href="#collapse-c50d13646ec66f1929da5d491f2dff0f" aria-expanded="false">博客 <span class="list-group-count">(2)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse" id="collapse-c50d13646ec66f1929da5d491f2dff0f" role="tabpanel" aria-labelledby="heading-c50d13646ec66f1929da5d491f2dff0f"><div class="category-post-list"><a href="/Hello-My-World" title="Hello My World" class="list-group-item list-group-item-action"><span class="category-post">Hello My World</span> </a><a href="/Hexo-Configuration" title="Hexo配置与扩展" class="list-group-item list-group-item-action"><span class="category-post">Hexo配置与扩展</span></a></div></div></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Linux学习笔记 #4 服务器环境配置</h1><p class="note note-info">本文最后更新于：2024年8月12日 下午</p><div class="markdown-body"><p>上一节 <a href="https://hwcoder.top/Linux-Note-3">Linux学习笔记 #3 连接远程服务器</a> 中，介绍了远程控制 Linux 服务器的情景。假设我们已经完成了初次 SSH 鉴权，以下内容为<strong>后续</strong>的操作。</p><p>当新用户登录服务器时，会默认在 <code>/home/user</code> 目录下，此时这里只有配置好的 <code>.ssh</code> 目录。用户目录下的所有配置<strong>仅会与用户个人绑定</strong>，包括 Python、Conda、Git、Bash 等环境，所以此时我们需要一一配置。</p><blockquote><p><code>/home/user</code> 目录通常空间有限，因此对于<strong>开放权限较高</strong>的私人服务器，用户目录只用于存放个人使用的配置文件。而工程以及大文件则会存放在另外的 <code>/data/user</code> 目录下，以节省服务器的存储空间。下面我们称 <code>/home/user</code> 目录为 <code>~</code>。</p></blockquote><h2 id="anaconda-环境">Anaconda 环境</h2><p>首先需要安装 Anaconda 环境，使用 <code>wget</code> 命令从清华镜像源下载（该命令由 Unix 自带），不需要下载最新版（这里选用的版本仅支持到 Py3.8）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2020.02-Linux-x86_64.sh</span><br></code></pre></td></tr></table></figure><p>下载完成后，当前目录下就会出现 <code>.sh</code> 脚本形式的安装包，输入以下命令运行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> bash ./Anaconda3-2020.02-Linux-x86_64.sh</span><br></code></pre></td></tr></table></figure><p>一路 Enter 确定，最后输入 yes，安装后可用 <code>conda -V</code> 查看版本。如果这里提示无法识别命令，参考接下来的做法即可。</p><h3 id="虚拟环境">虚拟环境</h3><p>在 <code>~</code> 目录下，还有一个 <code>.bashrc</code> 文件，对于大部分 Unix 系统，Bash 是作为默认终端被安装的。你对 bashrc 所做的任何修改将在<strong>下一次启动终端</strong>时生效。如果你想立刻生效的话，运行下面的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">source</span> ~/.bashrc</span><br></code></pre></td></tr></table></figure><p>此时会发现用户名前面就会有一个 <code>(base)</code>，表示现在处于<strong>基础环境</strong>中。Conda 集成了 Python 发行版，同时可以对 Python 虚拟环境进行管理，常用的命令有：</p><ul><li><code>conda create -n &lt;env_name&gt; python=&lt;ver&gt;</code>：创建 conda 环境。</li><li><code>conda create -n &lt;env_name&gt; --file &lt;this file&gt;</code>：创建 conda 环境并指定 requirement.txt 路径配置。</li><li><code>conda create -n &lt;new_env&gt; --clone &lt;old_env&gt;</code>：复制原有 conda 环境。</li><li><code>conda env list</code> 或 <code>conda info -e</code>：查看现有的 conda 环境。</li><li><code>conda activate &lt;env_name&gt;</code>：切换 conda 环境。</li><li><code>conda deactivate</code>：关闭虚拟环境。</li><li><code>conda remove -n &lt;env_name&gt; --all</code>：删除环境。</li><li><code>conda list --export &gt; environment.yml</code>：导出环境配置列表。</li><li><code>conda env create -f environment.yml</code>：根据环境配置列表创建新环境。</li></ul><p>良好的环境管理习惯有益于在同一机器上运行多个深度学习框架而相互之间不会影响，用户创建的环境会被保存在 <code>~/anaconda3/env/xxx</code>，需要时可以直接拷贝。</p><h3 id="cuda-环境与-pytorch">CUDA 环境与 PyTorch</h3><p>安装完 Anaconda 后，我们就能使用 <code>pip</code> 和 <code>conda</code> 两种包管理器了（此前只能用 Linux 自带的 <code>apt</code>）。</p><blockquote><p>在服务器里，我们只推荐用 <code>conda</code> 安装 <code>cudatoolkit</code>、<code>cudnn</code> 以及 <code>jupyter</code> 相关的包，其他包建议用 <code>pip</code> 进行安装。</p></blockquote><p>安装 CUDA 前，可以先查看显卡驱动的版本：通常是你的环境需要什么版本的 CUDA，你就需要对应版本的驱动。对应关系可以查看：<a target="_blank" rel="noopener" href="https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html">CUDA Release Notes (nvidia.com)</a>。</p><p>初次登录可以先测试 <code>nvidia-smi</code>，其中会显示 Driver Version（当前显卡驱动）以及 CUDA Version（当前驱动支持的<strong>最高 CUDA 版本</strong>）。</p><blockquote><p>如果没有反应，可能需要手动安装 N 卡驱动：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> sudo add-apt-repository ppa:graphics-drivers/ppa  <span class="hljs-comment"># 把显卡驱动加入PPA</span></span><br><span class="hljs-meta">$</span><span class="bash"> ubuntu-drivers devices  <span class="hljs-comment"># 查找当前设备适合的驱动版本</span></span><br><span class="hljs-meta">$</span><span class="bash"> sudo apt-get install nvidia-driver-418  <span class="hljs-comment"># 安装对应版本</span></span><br></code></pre></td></tr></table></figure><p>如果要更换驱动版本，则需要卸载后重装，中间需要重启机器一次：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> sudo apt-get remove --purge nvidia*  <span class="hljs-comment"># 直接卸载</span></span><br><span class="hljs-meta">$</span><span class="bash"> sudo apt autoremove</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">$</span><span class="bash"> ./nvidia-uninstall  <span class="hljs-comment"># 也可以用二进制文件进行卸载，一般在 /usr/bin 下</span></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">$</span><span class="bash"> sudo apt install nvidia-driver-530 <span class="hljs-comment"># 530 是版本号</span></span><br></code></pre></td></tr></table></figure></blockquote><p>之后就可以安装 CUDA 了，官网的链接有 <a target="_blank" rel="noopener" href="https://developer.nvidia.com/cuda-downloads">CUDAToolkit</a> 和 <a target="_blank" rel="noopener" href="https://developer.nvidia.com/cudnn">cuDNN</a>。不过其实现在安装 PyTorch 时可以帮你带上 cudatoolkit 和 cudnn 等东西的安装，所以也可以跳过。如果要安装，建议使用 <code>conda</code> 在 <code>conda-forge</code> 源下进行安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> conda install -c conda-forge cudatoolkit=12.1 cudnn</span> <br></code></pre></td></tr></table></figure><p>安装在<strong>基本环境</strong>后，可以使用 <code>nvcc -V</code> 查看 CUDA 版本。</p><h3 id="第三方库">第三方库</h3><p>使用 <code>pip</code> 进行安装时，建议安装在<strong>虚拟环境</strong>中，特别是一些<strong>不常用</strong>的包。如果下载过慢或失败，可以使用清华源进行下载，使用以下命令在<strong>个人配置</strong>中更新及换源：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> pip install -U pip -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="hljs-meta">$</span><span class="bash"> pip config <span class="hljs-built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></code></pre></td></tr></table></figure><p>如果不方便换源，临时使用的方法为：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> pip install &lt;package&gt; -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></code></pre></td></tr></table></figure><p>这里以 PyTorch 为例，我们将其装在<strong>虚拟环境</strong>中，使用以下命令，不同库之间用<strong>空格隔开</strong>可一并安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> pip install torch torchvision torchaudio</span> <br></code></pre></td></tr></table></figure><blockquote><p>为什么 PyTorch <strong>不要装在基本环境</strong>？因为安装高版本的 PyTorch 时会自动替换 Numpy 等依赖库至相应版本。而这些自动替换的基础库很有可能与其他高级库产生不匹配的冲突，导致原先功能无法正常使用，也就是原先的运行环境会被污染。此外这样也便于虚拟环境的拷贝。</p><p>注意：通常安装 PyTorch 会在 <a target="_blank" rel="noopener" href="https://pytorch.org/get-started/locally/">官网</a> 选择合适的版本，如果待安装的 PyTorch 版本较旧，可以指定安装时的 index 地址。官方提供的 whl 目录在这：<a target="_blank" rel="noopener" href="https://download.pytorch.org/whl/torch/">download.pytorch.org/whl/torch/</a>。</p></blockquote><p>成功安装后可以在命令行里打开 Python 测试：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> torch<br><span class="hljs-meta">&gt;&gt;&gt; </span>torch.__version__<br><span class="hljs-meta">&gt;&gt;&gt; </span>torch.cuda.is_available()<br><span class="hljs-meta">&gt;&gt;&gt; </span>torch.cuda.device_count()<br><span class="hljs-meta">&gt;&gt;&gt; </span>torch.tensor([<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>]).cuda()<br><span class="hljs-comment"># 1.9.1+cu11.1</span><br><span class="hljs-comment"># True</span><br><span class="hljs-comment"># 4</span><br><span class="hljs-comment"># tensor([1., 2.], device=&#x27;cuda:0&#x27;)</span><br></code></pre></td></tr></table></figure><p>下面列举需要安装在<strong>基本环境</strong>中的常用库，安装方法同上：</p><ul><li><code>gpustat</code>：用于查看动态查看 GPU 状态（需要 Nvidia 驱动），<code>watch -n1 -c gpustat --color</code>。</li><li><code>ipdb</code>：用于简易的断点调试，可以看做 <code>pdb</code> 的升级版，<code>python -m ipdb main.py</code>。</li></ul><h3 id="notebook">Notebook</h3><p>有时候需要在远程服务器中使用 Jupyter Notebook，就需要先在远程安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ conda install -c conda-forge jupyter notebook<br></code></pre></td></tr></table></figure><p>之后就可以在远程启动 Jupyter 服务，内核放在远程：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ jupyter notebook --port=8889<br></code></pre></td></tr></table></figure><p>启动后会获得服务的 URL 地址，这个地址可以在本地用浏览器直接打开，也可以在 VSCode 中安装 Jupyter 插件后打开。</p><h2 id="个人配置">个人配置</h2><p>如果这个服务器需要<strong>长期使用</strong>，那么进行下面的配置就很有必要。以下大部分内容需要用 <code>apt</code> 包管理器安装，因此需要获取 <code>sudo</code> 临时<strong>管理员权限</strong>，如果没有可以向管理员申请。</p><h3 id="git-配置">Git 配置</h3><p>安装 Git 后，在 <code>~</code> 下就会存在一个 <code>.gitconfig</code> 或 <code>.config/git/config</code> 的文件，如果没有则需自行安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> sudo apt-get install git -y  <span class="hljs-comment"># -y 表示默认 yes</span></span><br></code></pre></td></tr></table></figure><p>在服务器里配置 Git 有三层，每层的配置（系统 <code>--system</code> 、全局 <code>--global</code>、仓库 <code>--local</code>）都会<strong>覆盖掉上一层次</strong>的配置，这里要修改 <code>~</code> 下的<strong>个人配置</strong>，则需要用到 <code>--global</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 替换成个人信息！</span><br>$ git config --global user.name <span class="hljs-string">&quot;hewei2001&quot;</span><br>$ git config --global user.email <span class="hljs-string">&quot;631670924@qq.com&quot;</span><br><span class="hljs-comment"># 解除 GitHub x</span><br>$ git config --global http.postBuffer 524288000<br><span class="hljs-comment"># 常用的指令可以取 alias 别名</span><br>$ git config --global alias.showlog <span class="hljs-string">&quot;log --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit --date=relative&quot;</span><br><span class="hljs-comment"># 如果要修改指定仓库下的配置，则可以替换成 --local</span><br></code></pre></td></tr></table></figure><p>如果需要建立远程 SSH 鉴权，使用以下命令打印出<strong>公钥</strong>，手动复制到 GitHub 上：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="hljs-string">&quot;631670924@qq.com&quot;</span>  <span class="hljs-comment"># 生成</span></span><br><span class="hljs-meta">$</span><span class="bash"> cat ~/.ssh/id_rsa.pub  <span class="hljs-comment"># 打印</span></span><br><span class="hljs-meta">$</span><span class="bash"> ssh -T git@github.com  <span class="hljs-comment"># 测试</span></span><br></code></pre></td></tr></table></figure><h3 id="oh-my-zsh">oh-my-zsh</h3><p>首先检查<strong>服务器可用终端</strong>是否包含 <code>zsh</code>，如果有直接切换，并安装<strong>插件管理器</strong> <code>oh-my-zsh</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> cat /etc/shells  <span class="hljs-comment"># 打印可用终端，看有没有 /bin/zsh</span></span> <br><span class="hljs-meta">$</span><span class="bash"> chsh -s /bin/zsh</span> <br><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">clone</span> https://gitee.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh</span><br><span class="hljs-meta">$</span><span class="bash"> cp ~/.zshrc ~/.zshrc.bak  <span class="hljs-comment"># 备份原配置</span></span><br><span class="hljs-meta">$</span><span class="bash"> cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">source</span> ~/.zshrc</span><br></code></pre></td></tr></table></figure><p>如果没有自带 <code>zsh</code>，完成以下几步后，就可以成功安装二者：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> sudo apt-get install zsh -y</span><br><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">clone</span> https://g.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh</span><br><span class="hljs-meta">$</span><span class="bash"> cp ~/.zshrc ~/.zshrc.bak  <span class="hljs-comment"># 备份原配置</span></span><br><span class="hljs-meta">$</span><span class="bash"> cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</span><br><span class="hljs-meta">$</span><span class="bash"> chsh -s /bin/zsh  <span class="hljs-comment"># 切换终端</span></span><br></code></pre></td></tr></table></figure><blockquote><p>如果执行第一步时无 <code>sudo</code> 权限，则需要自行安装资源包及依赖，参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/XiiX/p/14618799.html">Linux 以非 root 用户安装 zsh</a>。</p></blockquote><p>重启系统，此时已经进入新的 <code>zsh</code> 终端，下载将要用到的主题和插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 主题 powerlevel10k</span><br>git <span class="hljs-built_in">clone</span> --depth=1 https://gitee.com/romkatv/powerlevel10k.git <span class="hljs-variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/themes/powerlevel10k<br><span class="hljs-comment"># 两个插件</span><br>git <span class="hljs-built_in">clone</span> --depth=1 https://gitee.com/zsh-users/zsh-autosuggestions <span class="hljs-variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions<br>git <span class="hljs-built_in">clone</span> --depth=1 https://gitee.com/zsh-users/zsh-syntax-highlighting.git <span class="hljs-variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting<br></code></pre></td></tr></table></figure><p>打开 <code>.zshrc</code>，<strong>手动修改</strong>以下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 主题，如果要用自带的主题推荐 bira</span><br>ZSH_THEME=<span class="hljs-string">&quot;powerlevel10k/powerlevel10k&quot;</span><br><span class="hljs-comment"># 插件</span><br>plugins=(git <br>		 tmux <br>		 z <br>		 extract <br>		 zsh-autosuggestions<br>		 zsh-syntax-highlighting)<br></code></pre></td></tr></table></figure><p><code>oh-my-zsh</code> 自带的插件定义了常用的别名，可以用 <code>alias</code> 命令查看：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># git 相关</span><br>gaa = git add --all <br>gcmsg = git commit -m <br>ga = git add <br>gst = git status <br>gp = git push<br><span class="hljs-comment"># tmux 相关</span><br>tl = tmux list-sessions<br>tkss = tmux kill-session -t<br>ta = tmux attach -t<br>ts = tmux new-session -s<br></code></pre></td></tr></table></figure><p>下面是部分自带的插件、需要手动安装的插件介绍：</p><ul><li><code>z</code>：在常用目录之间<strong>直接跳转</strong>，使用 <code>z &lt;dir_name&gt;</code>。</li><li><code>extract</code>：<strong>一键解压</strong>各种形式压缩包，使用 <code>x &lt;file_name&gt;</code>。</li><li><code>gitignore</code>：一键生成 gitignore 模板，使用 <code>gi python &gt; .gitignore</code>。</li><li><code>cpv</code>：带进度条复制文件，使用 <code>cpv &lt;a&gt; &lt;b&gt;</code>。</li><li><code>colored-man-pages</code>：带颜色的 <code>man</code> 菜单。</li><li><code>sudo</code>：上一条命令忘记加 <code>sudo</code>，双击 <code>ESC</code> 就会自动加上。</li><li><code>zsh-autosuggestions</code>：<strong>命令补全</strong>插件，需要手动安装。</li><li><code>zsh-syntax-highlighting</code>：<strong>命令高亮</strong>插件，需要手动安装。</li><li><code>tldr</code>：简化 <code>man</code> 菜单，使用 <code>tldr &lt;command&gt;</code>。需要手动安装并更新数据库。</li></ul><blockquote><p>之前在 <code>.bashrc</code> 里的一些配置也要搬过来，主要有 <strong>Conda 环境的路径配置</strong>和一些 alias，配置完成后使用 <code>source ~/.zshrc</code> 命令<strong>重启终端</strong>即可。之后会进入主题的引导设置，如果想重新配置可以输入 <code>p10k configure</code> 命令。</p><p>有时候配置完 zsh 后会使用不了 pip 等命令，出现 zsh: command not found: xxx 报错，这时候需要在 <code>~/.zshrc</code> 中找到 User configuration 位置，将 <code>~/.bash_profile</code> 或者 <code>~/.profile</code> 中的跟<strong>系统路径</strong>有关的命令复制进去。（<code>export $(cat /proc/1/environ |tr 0 n | xargs --null)</code>）</p></blockquote><h3 id="反向代理">反向代理</h3><p>加载预训练模型时，总是不可避免地要去访问国外下载源，而部署在国内网络的服务器则无能为力。此时就需要在主机使用 VPN，通过「<strong>反向代理</strong>」的方法让服务器也能使用到主机的 VPN。</p><p>在<strong>本机</strong>终端输入以下命令，并保持终端开启：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ ssh -NR 12306:localhost:7890 hewei@10.249.xx.xxx<br><span class="hljs-comment"># 其中 12306 可以是任意端口，7890 则必须改成 VPN 的代理端口！</span><br></code></pre></td></tr></table></figure><p>在<strong>服务器</strong>终端输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">export</span> http_proxy=http://127.0.0.1:12306/<br>$ <span class="hljs-built_in">export</span> https_proxy=http://127.0.0.1:12306/<br><span class="hljs-comment"># 其中 12306 必须和 前述端口 一致！</span><br></code></pre></td></tr></table></figure><p>完成后，可以使用 <code>wget google.com</code> 测试是否成功。为了方便在服务器开启服务，可以在 <code>~./zshrc</code> 中加上别名:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">alias</span> proxyon=<span class="hljs-string">&#x27;export http_proxy=http://127.0.0.1:12306 https_proxy=http://127.0.0.1:12306 &amp;&amp; echo Proxy On!&#x27;</span></span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">alias</span> proxyoff=<span class="hljs-string">&#x27;unset http_proxy https_proxy &amp;&amp; echo Proxy Off!&#x27;</span></span><br></code></pre></td></tr></table></figure><blockquote><p>如果上述方法行不通，除了用本机下载预训练模型后 <code>scp</code> 到服务器，还可尝试此方案：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/475260268">如何优雅的下载 huggingface-transformers 模型</a>。</p><p>最新的总结，包含镜像站：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/663712983">如何快速下载huggingface模型——全方法总结 - 知乎 (zhihu.com)</a></p></blockquote><h3 id="服务器安装-clash">服务器安装 Clash</h3><p>这里展示在 Linux 系统中使用 Clash 挂载 VPN 的方法：</p><ol type="1"><li><p>下载 <a target="_blank" rel="noopener" href="https://github.com/Dreamacro/clash/releases/tag/premium">Clash Premium</a>：参考 clash-linux-amd64-vX.Y.Z.gz 或 clash-linux-amd64-YYYY.MM.DD.gz</p></li><li><p>进入服务器，在任意目录下新建文件夹 /clash，解压上述文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 解压上述文件</span><br>gzip -d clash-linux-amd64-vX.Y.Z.gz<br><span class="hljs-comment"># 将解压后的文件重命名为 `clash`，再赋权</span><br>chmod 777 clash<br></code></pre></td></tr></table></figure></li><li><p>在该目录下运行解压后的文件：<code>./clash</code></p><ul><li>这个时候会<strong>报错</strong>，然后在 ~/.config 下会自动创建一个 clash 目录，并自动下载 MMDB 文件</li><li>如果没有自动下载，则到 <a target="_blank" rel="noopener" href="https://github.com/Dreamacro/maxmind-geoip/releases/latest/download/Country.mmdb">仓库</a> 中手动下载然后拖到 ~/.config/clash 下</li><li><strong>此时这个目录下有三个文件</strong>：cache.db + config.yaml + Country.mmdb</li></ul></li><li><p>在本地找到 VPN 的 Clash 配置文件 config.yaml，复制到 ~/.config/clash/config.yaml 中：</p><ul><li><p>直接配置的服务器可能时断时续，可以<strong>打开 Tun 模式</strong>使用（只有 Premium 版才能开启），在 YAML 配置文件末尾加入以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">tun:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">stack:</span> <span class="hljs-string">system</span> <span class="hljs-comment"># gvisor</span><br>    <span class="hljs-attr">dns-hijack:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">any:53</span><br>    <span class="hljs-attr">auto-route:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># auto set global route</span><br>    <span class="hljs-attr">auto-redir:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">auto-detect-interface:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># conflict with interface-name</span><br></code></pre></td></tr></table></figure></li><li><p>复制完再到 /clash 目录下运行 <code>./clash</code>，此时就能跑通</p></li><li><p>如果报错显示 7890 或 9090 端口被占用，一般是被僵尸进程占用了，使用 <code>ps aux | grep clash</code> 找到进程号，再 <code>kill</code> 即可</p></li></ul></li><li><p>成功运行后，在终端中配置端口转发：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> http_proxy=127.0.0.1:7890<br><span class="hljs-built_in">export</span> https_proxy=127.0.0.1:7890<br></code></pre></td></tr></table></figure></li></ol><p>大功告成！可以测试连接：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl google.com<br></code></pre></td></tr></table></figure><h2 id="一键配置">一键配置</h2><p>下面对于<strong>临时使用的命令</strong>进行汇总，由 Shell 脚本的形式一键执行。只需在 <code>/home/user</code> 目录下新建一个 <code>run.sh</code> 文件，输入以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># conda 相关</span><br>wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2020.02-Linux-x86_64.sh<br>bash Anaconda3-2020.02-Linux-x86_64.sh<br><span class="hljs-built_in">source</span> ~/.bashrc<br>conda install -c conda-forge cudatoolkit=11.1 cudnn<br><br><span class="hljs-comment"># pip 相关</span><br>pip install -U pip -i https://pypi.tuna.tsinghua.edu.cn/simple<br>pip config <span class="hljs-built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple<br>pip install gpustat<br>pip install nvitop<br><br><span class="hljs-comment"># apt 相关</span><br>apt update<br>apt install zip -y<br>apt install unzip -y<br>apt install tmux -y<br>apt install inetutils-ping -y<br><br><span class="hljs-comment"># 别名配置</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias gpus=&#x27;watch -n1 -c gpustat --color&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias nvi=&#x27;nvitop&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias ca=&#x27;conda activate&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias cda=&#x27;conda deactivate&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias proxyon=&#x27;export http_proxy=http://127.0.0.1:12306 https_proxy=http://127.0.0.1:12306 &amp;&amp; echo Proxy On!&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias proxyoff=&#x27;unset http_proxy https_proxy &amp;&amp; echo Proxy Off!&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias tl=&#x27;tmux list-sessions&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias tk=&#x27;tmux kill-session -t&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias ta=&#x27;tmux attach -t&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias tn=&#x27;tmux new-session -s&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias ll=&#x27;ls -alF&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias la=&#x27;ls -A&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias l=&#x27;ls -CF&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias ls=&#x27;ls --color=tty&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias md=&#x27;mkdir -p&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;alias rd=&#x27;rmdir&#x27;&quot;</span> &gt;&gt; ~/.bashrc<br><br><span class="hljs-built_in">source</span> ~/.bashrc<br><br><span class="hljs-comment"># git 配置，替换成自己的</span><br>git config --global user.name <span class="hljs-string">&quot;hewei2001&quot;</span><br>git config --global user.email <span class="hljs-string">&quot;631670924@qq.com&quot;</span><br></code></pre></td></tr></table></figure><p>在命令行中执行 <code>sh run.sh</code>。</p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%8A%80%E6%9C%AF%E7%BB%8F%E9%AA%8C/" class="category-chain-item">技术经验</a> <span>></span> <a href="/categories/%E6%8A%80%E6%9C%AF%E7%BB%8F%E9%AA%8C/Linux/" class="category-chain-item">Linux</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Linux/" class="print-no-link">#Linux</a></div></div><div class="license-box my-3"><div class="license-title"><div>Linux学习笔记 #4 服务器环境配置</div><div>https://hwcoder.top/Linux-Note-4</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Wei He</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年3月5日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/ML-Note-12" title="ML学习笔记 #12 异常检测"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">ML学习笔记 #12 异常检测</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/ML-Note-11" title="ML学习笔记 #11 主成分分析"><span class="hidden-mobile">ML学习笔记 #11 主成分分析</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"jdbBr3BddTiqSCPnXw6sXFv7-gzGzoHsz","appKey":"2bjgwDr2opjVCwhgjDMpk53c","path":"window.location.pathname","placeholder":"说点什么吧( •̀ ω •́ )✧","avatar":"retro","meta":["nick","mail","link"],"requiredFields":["nick"],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,i=t.getElementById("subtitle");i&&e&&e(i.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>